import{_ as I,a as w,r as g,b as m,o as h,c as v,e as t,d as c,j as i,t as l,F as N,f as S,w as y,i as B,k as P,p as U,l as z,m as k}from"./index-e2d856b9.js";const C=r=>(U("data-v-648596d9"),r=r(),z(),r),F={class:"cart"},L={class:"cart-header"},$={class:"cart-header-item"},j={class:"cart-num"},D={class:"cart-number"},E=C(()=>t("button",null,"管理",-1)),T={class:"cart-item-left"},q={class:"item-img-box"},A={class:"cart-item-right"},G={class:"cart-item-right-title"},H={class:"cart-item-right-nature"},J={class:"cart-item-right-price"},K={class:"content-num-span"},M=["onClick"],O={class:"content-num-span-item"},Q=["onClick"],R={class:"footer"},W={class:"total-price"},X=C(()=>t("button",{class:"footer-but"},"立即下单",-1)),Y={__name:"CartView",setup(r){const a=w({data:[]});let _=g(0);const d=()=>{P().then(s=>{console.log("拿到购物车所有数据==>",s),a.data=s.valid,_.value=0;for(let e=0;e<a.data.length;e++)_.value+=a.data[e].truePrice*a.data[e].cart_num;return _})};let n=g(0);const V=s=>{d();for(let e=0;e<a.data.length;e++)s==a.data[e].id&&(n.value=a.data[e].cart_num,n.value--);k(n.value,s),d()},x=s=>{d();for(let e=0;e<a.data.length;e++)s==a.data[e].id&&(n.value=a.data[e].cart_num,n.value++);k(n.value,s),d()};return d(),(s,e)=>{const u=m("van-icon"),f=m("van-checkbox"),b=m("van-image");return h(),v("div",F,[t("div",L,[t("span",$,[t("p",null,[c(u,{name:"passed"}),i(" 100%正品保证")]),t("p",null,[c(u,{name:"passed"}),i(" 所有商品精挑细选")]),t("p",null,[c(u,{name:"passed"}),i(" 售后无忧")])])]),t("div",j,[t("p",null,[i("购物数量 "),t("span",D,l(a.data.length),1)]),E]),(h(!0),v(N,null,S(a.data,o=>(h(),v("div",{class:"cart-item",key:o.id},[t("div",T,[c(f,{modelValue:a.data,"onUpdate:modelValue":e[0]||(e[0]=p=>a.data=p),"icon-size":"20px","checked-color":"red"},null,8,["modelValue"]),t("div",q,[c(b,{class:"cart-item-img",src:o.productInfo.image},null,8,["src"])])]),t("div",A,[t("p",G,l(o.productInfo.store_name),1),t("p",H,"属性:"+l(o.productInfo.attrInfo.suk),1),t("div",J,[t("p",null,"￥"+l(o.truePrice),1),t("div",K,[t("p",{class:"content-num-span-item",onClick:p=>V(o.id)}," - ",8,M),t("p",O,l(o.cart_num),1),t("p",{class:"content-num-span-item",onClick:p=>x(o.id)}," + ",8,Q)])])])]))),128)),t("div",R,[c(f,{name:"a",class:"footer-icon",modelValue:a.data[s.index],"onUpdate:modelValue":e[1]||(e[1]=o=>a.data[s.index]=o),"checked-color":"#e93323","icon-size":"18px"},{default:y(()=>[i("全选")]),_:1},8,["modelValue"]),t("p",W,"￥"+l(B(_)),1),X])])}}},tt=I(Y,[["__scopeId","data-v-648596d9"]]);export{tt as default};
